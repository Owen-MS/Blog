# 第11-20题
## 11、算法手写题
```javascript
// 已知如下数组：
var arr = [ [1, 2, 2], [3, 4, 5, 5], [6, 7, 8, 9, [11, 12, [12, 13, [14] ] ] ], 10];
// 编写一个程序将数组扁平化去并除其中重复部分数据，最终得到一个升序且不重复的数组
```
`[...new Set(arr.flat(Infinity))].sort((a,b) => a - b)`;
多写一句，如果sort函数中不传函数进去，默认按照字符编码进行排序1、10、111。诸如此类。
## 12、JS异步解决方案的发展历程以及优缺点。
[来自阮一峰](http://www.ruanyifeng.com/blog/2012/12/asynchronous%EF%BC%BFjavascript.html)
### 1. 回调函数
优点：简单、容易理解和部署。

缺点：不利于代码阅读和维护，各个部分之间耦合度过高，流程混乱，而且每个任务只能指定一个回调函数。
### 2. 事件监听
优点：容易理解，可以绑定多个事件，每个事件指定多个回调函数，而且可以"去耦合"，有利于实现模块化。

缺点：整个程序都变成事件驱动模型，运行流程会很不清晰。

### 3. 发布订阅
在前一步进一步升级，运行流程清晰。
例如jquery.subscribe('done', f2);
### 4. promise
是commonJS提出工作组提出的一种规范。
优点： 链式调用程序流程清晰，对比前三，如果一个任务完成，再添加回调函数就会立刻执行。所以
不用担心错过了某个信号和事件。

缺点：编写和理解。
## 13、Promise函数是同步执行还是异步执行，那么then方法呢
```javascript
const promise = new Promise((resolve, reject) => {
  console.log(1);
  resolve(5);
  console.log(2);
}).then(val => {
  console.log(val);
});

promise.then(() => {
  console.log(3);
});

console.log(4);

setTimeout(function() {
  console.log(6);
});

// 1 2 4 5 3 6
```
Promise函数是同步执行，then是异步执行。
## 14、手写一个new
```javascript
function _new(Fn, ...args) {
  const obj = Object.create(Fn.prototype);
  const result = Fn.apply(obj, args);
  return result instanceof object ? result : obj;
}
```
## 15、简单讲解一下Http2的多路复用
http2.0采用了二进制传输格式传输，取消了HTTP1.x的文本格式，二进制格式更高效。

多路复用代替了HTTP1.x的序列和阻塞机制，所有相同的域名请求都通过同一个TCP连接并发完成。
由串行改为并行\开启了keep-alive，虽然可以用多次，但是同一时刻只能有一个HTTP请求

在HTTP1.x中，并非多个请求需要多个TCP连接，浏览器为了控制资源会有6-8的TCP连接受限制。

HTTP2中（帧（frame）和流（stream））：
- 同域名下所有通信都在单个TCP上连接完成，消除了因多个TCP连接而带来的延时和内存损耗。
- 单个连接上可以并行交错的请求和响应，之间互不干扰。
## 16
