<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>周总结 22-05-16/22-05-22 | 黑木小课堂开课了</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="waiting for some one">
    
    <link rel="preload" href="/Blog/assets/css/0.styles.5b7f5b2e.css" as="style"><link rel="preload" href="/Blog/assets/js/app.f375fe27.js" as="script"><link rel="preload" href="/Blog/assets/js/2.c88ae757.js" as="script"><link rel="preload" href="/Blog/assets/js/50.e3e1ae37.js" as="script"><link rel="prefetch" href="/Blog/assets/js/10.f427b6bd.js"><link rel="prefetch" href="/Blog/assets/js/11.9f304a35.js"><link rel="prefetch" href="/Blog/assets/js/12.30354b1f.js"><link rel="prefetch" href="/Blog/assets/js/13.95eae7c7.js"><link rel="prefetch" href="/Blog/assets/js/14.00cadfd8.js"><link rel="prefetch" href="/Blog/assets/js/15.7e69b1b3.js"><link rel="prefetch" href="/Blog/assets/js/16.86c1a2b9.js"><link rel="prefetch" href="/Blog/assets/js/17.e83a8852.js"><link rel="prefetch" href="/Blog/assets/js/18.92355088.js"><link rel="prefetch" href="/Blog/assets/js/19.8957735b.js"><link rel="prefetch" href="/Blog/assets/js/20.9a915d6e.js"><link rel="prefetch" href="/Blog/assets/js/21.85678c64.js"><link rel="prefetch" href="/Blog/assets/js/22.2c0d25ad.js"><link rel="prefetch" href="/Blog/assets/js/23.21d51aaa.js"><link rel="prefetch" href="/Blog/assets/js/24.3f674744.js"><link rel="prefetch" href="/Blog/assets/js/25.dacf3e23.js"><link rel="prefetch" href="/Blog/assets/js/26.2d73d4ee.js"><link rel="prefetch" href="/Blog/assets/js/27.31409b2d.js"><link rel="prefetch" href="/Blog/assets/js/28.37d71dd3.js"><link rel="prefetch" href="/Blog/assets/js/29.f19180a1.js"><link rel="prefetch" href="/Blog/assets/js/3.acab97b8.js"><link rel="prefetch" href="/Blog/assets/js/30.9d4cc355.js"><link rel="prefetch" href="/Blog/assets/js/31.690356d1.js"><link rel="prefetch" href="/Blog/assets/js/32.7fc83c11.js"><link rel="prefetch" href="/Blog/assets/js/33.cf78d876.js"><link rel="prefetch" href="/Blog/assets/js/34.5bd1da2f.js"><link rel="prefetch" href="/Blog/assets/js/35.fb37de13.js"><link rel="prefetch" href="/Blog/assets/js/36.83a2a909.js"><link rel="prefetch" href="/Blog/assets/js/37.0bb65fa6.js"><link rel="prefetch" href="/Blog/assets/js/38.087596ab.js"><link rel="prefetch" href="/Blog/assets/js/39.0d56f966.js"><link rel="prefetch" href="/Blog/assets/js/4.5230782c.js"><link rel="prefetch" href="/Blog/assets/js/40.fcadfda4.js"><link rel="prefetch" href="/Blog/assets/js/41.dfef7bbe.js"><link rel="prefetch" href="/Blog/assets/js/42.db06ccfe.js"><link rel="prefetch" href="/Blog/assets/js/43.a7385a7e.js"><link rel="prefetch" href="/Blog/assets/js/44.5cf21fb0.js"><link rel="prefetch" href="/Blog/assets/js/45.78acc165.js"><link rel="prefetch" href="/Blog/assets/js/46.5c585071.js"><link rel="prefetch" href="/Blog/assets/js/47.85395c58.js"><link rel="prefetch" href="/Blog/assets/js/48.313c1cfa.js"><link rel="prefetch" href="/Blog/assets/js/49.5fafc2be.js"><link rel="prefetch" href="/Blog/assets/js/5.59a7f641.js"><link rel="prefetch" href="/Blog/assets/js/51.5ab1f37e.js"><link rel="prefetch" href="/Blog/assets/js/52.fcb023e8.js"><link rel="prefetch" href="/Blog/assets/js/53.5fa1c1ef.js"><link rel="prefetch" href="/Blog/assets/js/54.47d8c3fa.js"><link rel="prefetch" href="/Blog/assets/js/55.1b1649e8.js"><link rel="prefetch" href="/Blog/assets/js/56.5d99f046.js"><link rel="prefetch" href="/Blog/assets/js/57.cf117917.js"><link rel="prefetch" href="/Blog/assets/js/58.a932e8d4.js"><link rel="prefetch" href="/Blog/assets/js/59.306d018b.js"><link rel="prefetch" href="/Blog/assets/js/6.34fe87b9.js"><link rel="prefetch" href="/Blog/assets/js/60.9003beca.js"><link rel="prefetch" href="/Blog/assets/js/61.2a593451.js"><link rel="prefetch" href="/Blog/assets/js/62.025e604c.js"><link rel="prefetch" href="/Blog/assets/js/63.5182eb4a.js"><link rel="prefetch" href="/Blog/assets/js/64.327872a2.js"><link rel="prefetch" href="/Blog/assets/js/65.d528f6a9.js"><link rel="prefetch" href="/Blog/assets/js/66.e849914a.js"><link rel="prefetch" href="/Blog/assets/js/67.043b2815.js"><link rel="prefetch" href="/Blog/assets/js/68.71e6f142.js"><link rel="prefetch" href="/Blog/assets/js/69.47370d03.js"><link rel="prefetch" href="/Blog/assets/js/7.6a5ace96.js"><link rel="prefetch" href="/Blog/assets/js/70.f576c656.js"><link rel="prefetch" href="/Blog/assets/js/71.48ec8240.js"><link rel="prefetch" href="/Blog/assets/js/72.707b0cb5.js"><link rel="prefetch" href="/Blog/assets/js/73.1f985a34.js"><link rel="prefetch" href="/Blog/assets/js/74.593152e5.js"><link rel="prefetch" href="/Blog/assets/js/8.098db098.js"><link rel="prefetch" href="/Blog/assets/js/9.31cceed0.js">
    <link rel="stylesheet" href="/Blog/assets/css/0.styles.5b7f5b2e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Blog/" class="home-link router-link-active"><!----> <span class="site-name">黑木小课堂开课了</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/Blog/web/react/" class="nav-link">
  React
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/web/js/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/Blog/web/css/" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/Blog/web/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/Blog/web/dataStructure/" class="nav-link">
  数据结构
</a></li></ul></div></div><div class="nav-item"><a href="/Blog/browser/" class="nav-link">
  浏览器
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程" class="dropdown-title"><span class="title">工程</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程" class="mobile-dropdown-title"><span class="title">工程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/wheel/webpack/" class="nav-link">
  webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><span class="title">博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="博客" class="mobile-dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/collect/skuPath/" class="nav-link">
  skuPath
</a></li><li class="dropdown-item"><!----> <a href="/Blog/collect/JS/" class="nav-link">
  JS常见手写题
</a></li><li class="dropdown-item"><!----> <a href="/Blog/collect/一套面试题/" class="nav-link">
  一套面试题
</a></li><li class="dropdown-item"><!----> <a href="/Blog/collect/错误监控及上报/" class="nav-link">
  错误监控
</a></li></ul></div></div><div class="nav-item"><a href="/Blog/100/" class="nav-link">
  前端100问
</a></div><div class="nav-item"><a href="/Blog/node/" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/Blog/diary/" class="nav-link router-link-active">
  随笔
</a></div><div class="nav-item"><a href="/Blog/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="https://github.com/Owen-MS/Blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/Blog/web/react/" class="nav-link">
  React
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/web/js/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/Blog/web/css/" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/Blog/web/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/Blog/web/dataStructure/" class="nav-link">
  数据结构
</a></li></ul></div></div><div class="nav-item"><a href="/Blog/browser/" class="nav-link">
  浏览器
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程" class="dropdown-title"><span class="title">工程</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程" class="mobile-dropdown-title"><span class="title">工程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/wheel/webpack/" class="nav-link">
  webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客" class="dropdown-title"><span class="title">博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="博客" class="mobile-dropdown-title"><span class="title">博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/collect/skuPath/" class="nav-link">
  skuPath
</a></li><li class="dropdown-item"><!----> <a href="/Blog/collect/JS/" class="nav-link">
  JS常见手写题
</a></li><li class="dropdown-item"><!----> <a href="/Blog/collect/一套面试题/" class="nav-link">
  一套面试题
</a></li><li class="dropdown-item"><!----> <a href="/Blog/collect/错误监控及上报/" class="nav-link">
  错误监控
</a></li></ul></div></div><div class="nav-item"><a href="/Blog/100/" class="nav-link">
  前端100问
</a></div><div class="nav-item"><a href="/Blog/node/" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/Blog/diary/" class="nav-link router-link-active">
  随笔
</a></div><div class="nav-item"><a href="/Blog/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="https://github.com/Owen-MS/Blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/Blog/diary/21-08-21.html" class="sidebar-link">学习计划罗列</a></li><li><a href="/Blog/diary/前端面试.html" class="sidebar-link">面试题</a></li><li><a href="/Blog/diary/垃圾回收.html" class="sidebar-link">V8垃圾回收机制</a></li><li><a href="/Blog/diary/url渲染.html" class="sidebar-link">从输入url到渲染发生了什么</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="周总结-22-05-16-22-05-22"><a href="#周总结-22-05-16-22-05-22" class="header-anchor">#</a> 周总结 22-05-16/22-05-22</h1> <h2 id="_1、match-第二个参数才是我括号中想要的值"><a href="#_1、match-第二个参数才是我括号中想要的值" class="header-anchor">#</a> 1、match 第二个参数才是我括号中想要的值！</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">'For more information, see Chapter 3.4.5.1'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">see (Chapter \d+(\.\d)*)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">)</span>

<span class="token keyword">var</span> found <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>found<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// logs [ 'see Chapter 3.4.5.1',</span>
<span class="token comment">//        'Chapter 3.4.5.1',</span>
<span class="token comment">//        '.1',</span>
<span class="token comment">//        index: 22,</span>
<span class="token comment">//        input: 'For more information, see Chapter 3.4.5.1' ]</span>

<span class="token comment">// 'see Chapter 3.4.5.1' 是整个匹配。</span>
<span class="token comment">// 'Chapter 3.4.5.1' 被'(chapter \d+(\.\d)*)'捕获。</span>
<span class="token comment">// '.1' 是被'(\.\d)'捕获的最后一个值。</span>
<span class="token comment">// 'index' 属性(22) 是整个匹配从零开始的索引。</span>
<span class="token comment">// 'input' 属性是被解析的原始字符串。</span>
</code></pre></div><h2 id="_2、按需倒入的原理是什么"><a href="#_2、按需倒入的原理是什么" class="header-anchor">#</a> 2、按需倒入的原理是什么？</h2> <p>动态加载模块</p> <ul><li>使用import函数。返回的是一个promise。webpack自动进行代码切割 （@babel/plugin-syntax-dynamic-import）;</li> <li>require.ensure webpack提供，懒加载。</li></ul> <p>对比一下：</p> <ul><li>import是解构过程并且是编译时执行。</li> <li>require是赋值过程并且是运行时才执行，也就是异步加载。</li> <li>require的性能相对于important稍低，因为require是运行时才引入模块并且还赋值给某个变量。</li></ul> <p>React.lazy 与 import（） 实现了渲染时的动态加载。有助于减少bundle的体积，并延迟加载在初次渲染时未用到的组件。</p> <h2 id="_3、tree-shaking的基础"><a href="#_3、tree-shaking的基础" class="header-anchor">#</a> 3、tree-shaking的基础</h2> <p>ES6的模块依赖关系的确定的，和运行时的状态无关，可以进行可靠的静态分析，这就是tree-shaking的基础。</p> <p>ES module的特性：</p> <ul><li>只能作为模块顶层的语句出现</li> <li>important的模块名只能是字符串常量</li> <li>import binding是immutable的</li></ul> <h2 id="_4、mutationobserver"><a href="#_4、mutationobserver" class="header-anchor">#</a> 4、MutationObserver</h2> <p>MutationObserver接口提供了监听DOM树所做更改的能力。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 选择需要观察变动的节点</span>
<span class="token keyword">const</span> targetNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'some-id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 观察器的配置（需要观察什么变动）</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span> attributes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> childList<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> subtree<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 当观察到变动时执行的回调函数</span>
<span class="token keyword">const</span> <span class="token function-variable function">callback</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">mutationsList<span class="token punctuation">,</span> observer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Use traditional 'for loops' for IE 11</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> mutation <span class="token keyword">of</span> mutationsList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>mutation<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'childList'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'A child node has been added or removed.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>mutation<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'attributes'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The '</span> <span class="token operator">+</span> mutation<span class="token punctuation">.</span>attributeName <span class="token operator">+</span> <span class="token string">' attribute was modified.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 创建一个观察器实例并传入回调函数</span>
<span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutationObserver</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 以上述配置开始观察目标节点</span>
observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>targetNode<span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 之后，可停止观察</span>
observer<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="_5、intersection-observer"><a href="#_5、intersection-observer" class="header-anchor">#</a> 5、Intersection Observer</h2> <p>Intersection Observer 提供了一种异步观察目标元与其祖先元素或顶级文档视窗(view port)交叉状态的方法。</p> <div class="language- extra-class"><pre class="language-text"><code>//observer配置项
var observerOptions = {
    threshold: .5, //目标元素与视窗重叠的阈值（0~1）
    root:null // 目标视窗即目标元素的父元素，如果没有提供，则默认body元素
}

//observer 回调函数
const observerCallback = (entries) =&gt; {
    entries.forEach(item =&gt; {
       /*
        * item.time发生相交到相应的时间，毫秒
        * item.rootBounds：根元素矩形区域的信息，如果没有设置根元素则返回 null，图中蓝色部分区域。
        * item.boundingClientRect：目标元素的矩形区域的信息，图中黑色边框的区域。
        * item.intersectionRect：目标元素与视口（或根元素）的交叉区域的信息，图中蓝色方块和粉红色方块相交的区域。
        * item.isIntersecting：目标元素与根元素是否相交
        * item.intersectionRatio：目标元素与视口（或根元素）的相交比例。
        * item.target：目标元素，图中黑色边框的部分。
        */
        // 当前元素可见
        if(item.isIntersecting){ 
            {
                ...业务逻辑
            }
            // 解除观察当前元素 避免不可见时候再次调用callback函数
            observer.unobserve(item.target) 
        }	
    })
}


var observer = new IntersectionObserver(observerCallback,observerOptions);

//获取目标元素
const target = document.getElementById(elemtentId);

//将目标元素传入观察对象
observer.observe(target);
</code></pre></div><h2 id="_6、requestanimationframe"><a href="#_6、requestanimationframe" class="header-anchor">#</a> 6、requestAnimationFrame</h2> <p>window.requestAnimationFrame() 告诉浏览器-你希望执行一个动画，并且要求浏览器在下次重绘之前调用指定的毁掉函数更新动画。
回调函数执行次数通常是每秒60次。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'some-element-you-want-to-animate'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> start<span class="token punctuation">;</span>
<span class="token keyword">let</span> cancel<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">step</span><span class="token punctuation">(</span><span class="token parameter">timestamp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>start <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span>
    start <span class="token operator">=</span> timestamp<span class="token punctuation">;</span>
  <span class="token keyword">const</span> elapsed <span class="token operator">=</span> timestamp <span class="token operator">-</span> start<span class="token punctuation">;</span>

  <span class="token comment">//这里使用`Math.min()`确保元素刚好停在200px的位置。</span>
  element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token string">'translateX('</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">0.1</span> <span class="token operator">*</span> elapsed<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'px)'</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>elapsed <span class="token operator">&lt;</span> <span class="token number">2000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 在两秒后停止动画</span>
     cancelId <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

cancelId <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span><span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>cancelId<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 取消</span>

</code></pre></div><h2 id="_7、requestidlecallback"><a href="#_7、requestidlecallback" class="header-anchor">#</a> 7、requestIdleCallback</h2> <p>window.requestIdleCallback() , 这个函数将在浏览器空闲时期被调用。这使开发者能够在主事件循环上执行后台和低优先级工作，
而不会影响延迟关键事件，如动画和输入响应。函数一般会按照先见先调用的顺序执行，然而，如果回调函数指定了超时事件timeout，
则有可能为了超时前执行函数而打乱执行顺序。</p> <div class="language- extra-class"><pre class="language-text"><code>var handle = window.requestIdleCallback(callback[, options]);
Window.cancelIdleCallback(handle);
</code></pre></div><h2 id="_8、同构应用我们须需要考虑的细节"><a href="#_8、同构应用我们须需要考虑的细节" class="header-anchor">#</a> 8、同构应用我们须需要考虑的细节</h2> <ul><li>打包环境区分（路由、打包）服务端无window等Bom对象</li> <li>注水和脱水。
例如redux，进行store的更新。为了保留这个状态一般做法是在服务端返回HTML字符串的时候，
将数据JSON.stringfy一并返回。这个过程叫做脱水。</li></ul> <p>客户端不需要请求获取数据，因为它可以直接使用服务器端下发的数据，这个数据叫做注水。</p> <ul><li>请求认证处理。解决方案：服务器发出请求时保留客户端页面请求的信息，并在API获取信息时携带并透传这个信息。react-apollo。</li> <li>样式问题处理。isomorphic-style-loader替换style-loader</li> <li>meta tags渲染 rea。ct-helmet库。解决动态设置header标签信息</li> <li>404处理。路由兜住。</li> <li>安全问题。xss攻击</li></ul> <h2 id="_9、compose"><a href="#_9、compose" class="header-anchor">#</a> 9、compose</h2> <p>利用reduceRight，因为从右往左执行</p> <h2 id="_10、new-map"><a href="#_10、new-map" class="header-anchor">#</a> 10、new Map</h2> <p>Map存放的顺序就是我们添加的顺序，所以可以使用mep.keys().next().value()得到第一个存储的变量。</p> <h2 id="_11、如何验证是nan以及-0和-0的判断"><a href="#_11、如何验证是nan以及-0和-0的判断" class="header-anchor">#</a> 11、如何验证是NAN以及+0和-0的判断</h2> <p>借用NAN !== NAN; 即A !== A &amp;&amp; B !== B</p> <p>1 / +0 === Infinity;</p> <p>1 / -0 === -Infinity;</p> <h2 id="_12、padstart"><a href="#_12、padstart" class="header-anchor">#</a> 12、padStart</h2> <p>padStart可以补充字符串前缀</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">'4'</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a = '05';</span>
</code></pre></div><h2 id="startswith"><a href="#startswith" class="header-anchor">#</a> startsWith</h2> <p>判断一个字符串是否以另外一个给定的字符串开头。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/22/2022, 2:37:07 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/Blog/assets/js/app.f375fe27.js" defer></script><script src="/Blog/assets/js/2.c88ae757.js" defer></script><script src="/Blog/assets/js/50.e3e1ae37.js" defer></script>
  </body>
</html>
